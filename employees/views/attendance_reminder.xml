<?xml version="1.0" encoding="UTF-8"?>
<odoo>

    <record id="action_attendance_reminder" model="ir.cron">
        <field name="name">Send Attendance Reminder</field>
        <field name="model_id" ref="hr.model_hr_employee"/>
        <field name="state">code</field>
        <field name="code">model.send_daily_reminder()</field>  
        <field name="interval_number">1</field> 
        <field name="numbercall">-1</field>  
        <field name="doall" eval="False"/>  
        <field name="active" eval="True"/>
        <field name="nextcall" eval="(DateTime.now() + timedelta(hours=9)).strftime('%Y-%m-%d %H:%M:%S')"/>
    </record>

     <record id="email_template_attendance_reminder" model="mail.template">
        <field name="name">Attendance Reminder</field>
        <field name="email_from">${(object.user_id.email or 'noreply@example.com')}</field>
        <field name="subject">Reminder: Check Attendance for ${object.name}</field>
        <field name="model_id" ref="hr.model_hr_employee"/>
        <field name="body_html">
            <![CDATA[
             <p><strong>Employee Name:</strong> ${object.name}</p>
            <p><strong>Department:</strong> ${object.department_id.name}</p>
            <p>Please check their attendance records and take appropriate action.</p>
            ]]>
        </field>

        <field name="body_html" type="html">
            <div>
                <div>
                    <h2>
                        Hi,
                               <t t-out="object.name"/>
                    </h2>
                    <div>
                        <h3>            

                            <p>This is a reminder that the following employee has not logged attendance for the last 3 days:</p>
                            <t t-out="object.department_id.name"/>                            
                        </h3>
                        <p>Please check their attendance records and take appropriate action.</p>

                    </div>
                </div>
                <br/>
                <br/>
                <p>Thank you!</p>
                <br/>
                <t t-out="object.company_id.name"/>
                <br/>
            </div>
        </field>
         <field name="auto_delete" eval="True"/>
    </record>

    
</odoo>
